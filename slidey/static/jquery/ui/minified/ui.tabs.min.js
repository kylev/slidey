/*
 * jQuery UI Tabs 1.6rc5
 *
 * Copyright (c) 2009 AUTHORS.txt (http://ui.jquery.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Tabs
 *
 * Depends:
 *	ui.core.js
 */(function(a){a.widget("ui.tabs",{_init:function(){this._tabify(true)},destroy:function(){var b=this.options;this.list.unbind(".tabs").removeClass(b.navClass).removeData("tabs");this.$tabs.each(function(){var c=a.data(this,"href.tabs");if(c){this.href=c}var d=a(this).unbind(".tabs");a.each(["href","load","cache"],function(e,f){d.removeData(f+".tabs")})});this.$lis.unbind(".tabs").add(this.$panels).each(function(){if(a.data(this,"destroy.tabs")){a(this).remove()}else{a(this).removeClass([b.tabClass,b.selectedClass,b.deselectableClass,b.disabledClass,b.panelClass,b.hideClass].join(" "))}});if(b.cookie){this._cookie(null,b.cookie)}},_setData:function(b,c){if((/^selected/).test(b)){this.select(c)}else{this.options[b]=c;this._tabify()}},length:function(){return this.$tabs.length},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+a.data(b)},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie="ui-tabs-"+a.data(this.list[0]));return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_tabify:function(q){this.list=this.element.is("div")?this.element.children("ul:first, ol:first").eq(0):this.element;this.$lis=a("li:has(a[href])",this.list);this.$tabs=this.$lis.map(function(){return a("a",this)[0]});this.$panels=a([]);var r=this,c=this.options;this.$tabs.each(function(s,o){if(o.hash&&o.hash.replace("#","")){r.$panels=r.$panels.add(r._sanitizeSelector(o.hash))}else{if(a(o).attr("href")!="#"){a.data(o,"href.tabs",o.href);a.data(o,"load.tabs",o.href);var u=r._tabId(o);o.href="#"+u;var t=a("#"+u);if(!t.length){t=a(c.panelTemplate).attr("id",u).addClass(c.panelClass).insertAfter(r.$panels[s-1]||r.list);t.data("destroy.tabs",true)}r.$panels=r.$panels.add(t)}else{c.disabled.push(s+1)}}});if(q){if(this.element.is("div")){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all")}this.list.addClass(c.navClass);this.$lis.addClass(c.tabClass);this.$panels.addClass(c.panelClass);if(c.selected===undefined){if(location.hash){this.$tabs.each(function(s,o){if(o.hash==location.hash){c.selected=s;return false}})}else{if(c.cookie){var j=parseInt(r._cookie(),10);if(j&&r.$tabs[j]){c.selected=j}}else{if(r.$lis.filter("."+c.selectedClass).length){c.selected=r.$lis.index(r.$lis.filter("."+c.selectedClass)[0])}}}}c.selected=c.selected===null||c.selected!==undefined?c.selected:0;c.disabled=a.unique(c.disabled.concat(a.map(this.$lis.filter("."+c.disabledClass),function(s,o){return r.$lis.index(s)}))).sort();if(a.inArray(c.selected,c.disabled)!=-1){c.disabled.splice(a.inArray(c.selected,c.disabled),1)}this.$panels.addClass(c.hideClass);this.$lis.removeClass(c.selectedClass);if(c.selected!==null&&this.$tabs.length){this.$panels.eq(c.selected).removeClass(c.hideClass);var e=[c.selectedClass];if(c.deselectable){e.push(c.deselectableClass)}this.$lis.eq(c.selected).addClass(e.join(" "));var k=function(){r._trigger("show",null,r.ui(r.$tabs[c.selected],r.$panels[c.selected]))};if(a.data(this.$tabs[c.selected],"load.tabs")){this.load(c.selected,k)}else{k()}}var l=function(o,i){if(i.is(":not(."+c.disabledClass+")")){i.toggleClass("ui-state-"+o)}};this.$lis.bind("mouseover.tabs mouseout.tabs",function(){l("hover",a(this))});this.$tabs.bind("focus.tabs blur.tabs",function(){l("focus",a(this).parents("li:first"))});a(window).bind("unload",function(){r.$lis.add(r.$tabs).unbind(".tabs");r.$lis=r.$tabs=r.$panels=null})}else{c.selected=this.$lis.index(this.$lis.filter("."+c.selectedClass)[0])}if(c.cookie){this._cookie(c.selected,c.cookie)}for(var g=0,p;p=this.$lis[g];g++){a(p)[a.inArray(g,c.disabled)!=-1&&!a(p).hasClass(c.selectedClass)?"addClass":"removeClass"](c.disabledClass)}if(c.cache===false){this.$tabs.removeData("cache.tabs")}var b,h;if(c.fx){if(c.fx.constructor==Array){b=c.fx[0];h=c.fx[1]}else{b=h=c.fx}}function d(i,o){i.css({display:""});if(a.browser.msie&&o.opacity){i[0].style.removeAttribute("filter")}}var m=h?function(i,o){o.animate(h,h.duration||"normal",function(){o.removeClass(c.hideClass);d(o,h);r._trigger("show",null,r.ui(i,o[0]))})}:function(i,o){o.removeClass(c.hideClass);r._trigger("show",null,r.ui(i,o[0]))};var n=b?function(o,i,s){i.animate(b,b.duration||"normal",function(){i.addClass(c.hideClass);d(i,b);if(s){m(o,s,i)}})}:function(o,i,s){i.addClass(c.hideClass);if(s){m(o,s)}};function f(s,u,i,t){var o=[c.selectedClass];if(c.deselectable){o.push(c.deselectableClass)}u.removeClass("ui-state-default").addClass(o.join(" ")).siblings().removeClass(o.join(" ")).addClass("ui-state-default");n(s,i,t)}this.$tabs.unbind(".tabs").bind(c.event+".tabs",function(){var t=a(this).parents("li:eq(0)"),i=r.$panels.filter(":visible"),s=a(r._sanitizeSelector(this.hash));if((t.hasClass("ui-state-active")&&!c.deselectable)||t.hasClass(c.disabledClass)||a(this).hasClass(c.loadingClass)||r._trigger("select",null,r.ui(this,s[0]))===false){this.blur();return false}c.selected=r.$tabs.index(this);if(c.deselectable){if(t.hasClass("ui-state-active")){r.options.selected=null;t.removeClass([c.selectedClass,c.deselectableClass].join(" ")).addClass("ui-state-default");r.$panels.stop();n(this,i);this.blur();return false}else{if(!i.length){r.$panels.stop();var o=this;r.load(r.$tabs.index(this),function(){t.addClass([c.selectedClass,c.deselectableClass].join(" ")).removeClass("ui-state-default");m(o,s)});this.blur();return false}}}if(c.cookie){r._cookie(c.selected,c.cookie)}r.$panels.stop();if(s.length){var o=this;r.load(r.$tabs.index(this),i.length?function(){f(o,t,i,s)}:function(){t.addClass(c.selectedClass).removeClass("ui-state-default");m(o,s)})}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(a.browser.msie){this.blur()}return false});if(c.event!="click"){this.$tabs.bind("click.tabs",function(){return false})}},add:function(e,d,c){if(c==undefined){c=this.$tabs.length}var g=this.options;var i=a(g.tabTemplate.replace(/#\{href\}/g,e).replace(/#\{label\}/g,d));i.addClass(g.tabClass).data("destroy.tabs",true);var h=e.indexOf("#")==0?e.replace("#",""):this._tabId(a("a:first-child",i)[0]);var f=a("#"+h);if(!f.length){f=a(g.panelTemplate).attr("id",h).addClass(g.hideClass).data("destroy.tabs",true)}f.addClass(g.panelClass);if(c>=this.$lis.length){i.appendTo(this.list);f.appendTo(this.list[0].parentNode)}else{i.insertBefore(this.$lis[c]);f.insertBefore(this.$panels[c])}g.disabled=a.map(g.disabled,function(k,j){return k>=c?++k:k});this._tabify();if(this.$tabs.length==1){i.addClass(g.selectedClass);f.removeClass(g.hideClass);var b=a.data(this.$tabs[0],"load.tabs");if(b){this.load(c,b)}}this._trigger("add",null,this.ui(this.$tabs[c],this.$panels[c]))},remove:function(b){var d=this.options,e=this.$lis.eq(b).remove(),c=this.$panels.eq(b).remove();if(e.hasClass(d.selectedClass)&&this.$tabs.length>1){this.select(b+(b+1<this.$tabs.length?1:-1))}d.disabled=a.map(a.grep(d.disabled,function(g,f){return g!=b}),function(g,f){return g>=b?--g:g});this._tabify();this._trigger("remove",null,this.ui(e.find("a")[0],c[0]))},enable:function(b){var c=this.options;if(a.inArray(b,c.disabled)==-1){return}var d=this.$lis.eq(b).removeClass(c.disabledClass);if(a.browser.safari){d.css("display","inline-block");setTimeout(function(){d.css("display","block")},0)}c.disabled=a.grep(c.disabled,function(f,e){return f!=b});this._trigger("enable",null,this.ui(this.$tabs[b],this.$panels[b]))},disable:function(c){var b=this,d=this.options;if(c!=d.selected){this.$lis.eq(c).addClass(d.disabledClass);d.disabled.push(c);d.disabled.sort();this._trigger("disable",null,this.ui(this.$tabs[c],this.$panels[c]))}},select:function(b){if(typeof b=="string"){b=this.$tabs.index(this.$tabs.filter("[href$="+b+"]")[0])}this.$tabs.eq(b).trigger(this.options.event+".tabs")},load:function(g,k){var l=this,d=this.options,e=this.$tabs.eq(g),j=e[0],h=k==undefined||k===false,b=e.data("load.tabs");k=k||function(){};if(!b||!h&&a.data(j,"cache.tabs")){k();return}var m=function(n){var o=a(n),p=o.find("*:last");return p.length&&p.is(":not(img)")&&p||o};var c=function(){l.$tabs.filter("."+d.loadingClass).removeClass(d.loadingClass).each(function(){if(d.spinner){m(this).parent().html(m(this).data("label.tabs"))}});l.xhr=null};if(d.spinner){var i=m(j).html();m(j).wrapInner("<em></em>").find("em").data("label.tabs",i).html(d.spinner)}var f=a.extend({},d.ajaxOptions,{url:b,success:function(o,n){a(l._sanitizeSelector(j.hash)).html(o);c();if(d.cache){a.data(j,"cache.tabs",true)}l._trigger("load",null,l.ui(l.$tabs[g],l.$panels[g]));try{d.ajaxOptions.success(o,n)}catch(p){}k()}});if(this.xhr){this.xhr.abort();c()}e.addClass(d.loadingClass);l.xhr=a.ajax(f)},url:function(c,b){this.$tabs.eq(c).removeData("cache.tabs").data("load.tabs",b)},ui:function(c,b){return{options:this.options,tab:c,panel:b,index:this.$tabs.index(c)}}});a.extend(a.ui.tabs,{version:"1.6rc5",getter:"length",defaults:{ajaxOptions:null,cache:false,cookie:null,deselectable:false,deselectableClass:"ui-tabs-deselectable",disabled:[],disabledClass:"ui-state-disabled",event:"click",fx:null,hideClass:"ui-tabs-hide",idPrefix:"ui-tabs-",loadingClass:"ui-tabs-loading",navClass:"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all",tabClass:"ui-state-default ui-corner-top",panelClass:"ui-tabs-panel ui-widget-content ui-corner-bottom",panelTemplate:"<div></div>",selectedClass:"ui-tabs-selected ui-state-active",spinner:"Loading&#8230;",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'}});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(c,f){f=f||false;var b=this,e=this.options.selected;function g(){b.rotation=setInterval(function(){e=++e<b.$tabs.length?e:0;b.select(e)},c)}function d(h){if(!h||h.clientX){clearInterval(b.rotation)}}if(c){g();if(!f){this.$tabs.bind(this.options.event+".tabs",d)}else{this.$tabs.bind(this.options.event+".tabs",function(){d();e=b.options.selected;g()})}}else{d();this.$tabs.unbind(this.options.event+".tabs",d)}}})})(jQuery);